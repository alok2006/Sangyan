services:
  - type: **static_site** # <--- CRITICAL CHANGE HERE
    name: sangyan-frontend
    env: static
    branch: main
    plan: free
    buildCommand: "cd frontend && if [ -f package-lock.json ]; then npm ci; else npm install; fi && npm run build"
    publishPath: "frontend/build"
    autoDeploy: true

  - type: web
    name: sangyan-backend
    env: python
    branch: main
    plan: starter
    buildCommand: "./build.sh"
    startCommand: "./start.sh"
    autoDeploy: true
    # Provide non-secret defaults here if you like; prefer setting secrets in the Render UI.
    envVars:
      - key: DEBUG
        value: "False"
      - key: ALLOWED_HOSTS
        value: "your-service.onrender.com"
      # DATABASE_URL will be injected from the managed database below using `fromDatabase` in the UI,
      # but you can also set it here as a secret placeholder if needed.

databases:
  - name: sangyan-db
    engine: postgres
    plan: starter
    # Optionally specify region: e.g. oregon, frankfurt, sydney
    # region: oregon